<!doctype html>
<html>
<head>
  <title>PacVis</title>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.css" rel="stylesheet" type="text/css" />

  <style type="text/css">
    body{
      margin: 0 0 0 0;
      padding: 0 0 0 0;
    }
    .target {
      width: 100vw;
      height: 100vh;
      margin: 0 0 0 0;
      padding: 0 0 0 0;
    }
  </style>
</head>
<body>
<div id="target" class="target"></div>

  <script type="text/javascript">
    var nodes = new vis.DataSet([
      {% for node in nodes %}
        {id: {{node["id"]}}, label: '{{node["label"]}}', level: {{node["level"]}}, group: '{{node["group"]}}', title:'{{node["title"]}}'  },
      {% end %}
    ]);


    var edges = new vis.DataSet([
      {% for link in links %}
        {from: {{link["from"]}}, to: {{link["to"]}}, arrows:"to" },
      {% end %}
    ]);

    // create a network
    var container = document.getElementById('target');
    var data = {
      nodes: nodes,
      edges: edges
    };
    var options = {
      groups: {
        standalone: { shape: 'square',},
        normal: { shape: 'dot',},
        consolidated: { shape: 'star', color: 'red'},
      },
      edges: {
         smooth: {
             type: 'cubicBezier',
             forceDirection: 'vertical' ,
             roundness: 0.4
         }
      },
      layout: {
         hierarchical: {
             direction: "UD",
             nodeSpacing: 3,
             treeSpacing: 1,
         },
        // repulsion: {
        //   nodeDistance: 400
        // },
        // barnesHut: {
        //   springLength: 300,
        //   springConstant: 0.1
        // },
        improvedLayout: true
      },
      // physics: false
      physics: {
        maxVelocity: 10000,
        // stabilization: true,
        hierarchicalRepulsion: {
          nodeDistance: 300,
          springLength: 600,
          springConstant: 0.5,
        },
        timestep: 0.3,
        // barnesHut: {
        //   springLength: 300,
        //   springConstant: 0.1
        // },
      }
    };
    var network = new vis.Network(container, data, options);
  </script>

</body>
</html>
